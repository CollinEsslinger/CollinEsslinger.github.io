<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Feuer-Quiz – Für die Grundschule</title>
  <style>
    body {
      font-family: "Segoe UI", Tahoma, sans-serif;
      background: #fbeee6;
      margin: 0;
      padding: 0;
      color: #333;
    }

    .quiz-container {
      max-width: 800px;
      margin: 30px auto;
      padding: 20px;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    h1 {
      text-align: center;
      margin-top: 0;
      color: #b1382b;
    }

    .question {
      margin-bottom: 30px;
    }

    .question h2 {
      margin-top: 0;
      font-size: 1.2em;
      color: #622b00;
    }

    .options-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 12px;
      margin-top: 10px;
    }

    label.option {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 10px;
      cursor: pointer;
      background: #fafafa;
      transition: background 0.2s, border-color 0.2s;
      text-align: center;
    }

    label.option:hover {
      background: #f2f2f2;
      border-color: #b1382b;
    }

    label.option input {
      margin-bottom: 8px;
      transform: scale(1.3);
      accent-color: #b1382b;
    }

    label.option img {
      width: 100px;
      height: 100px;
      object-fit: contain;
      margin-bottom: 6px;
      display: block;
    }

    button.btn {
      background: #b1382b;
      color: #fff;
      border: none;
      padding: 12px 24px;
      font-size: 1rem;
      border-radius: 8px;
      cursor: pointer;
      margin-top: 20px;
      display: block;
      width: 100%;
    }

    button.btn:hover {
      background: #8d2e24;
    }

    label.option.correct-answer {
      border-color: #28a745;
      background-color: #e9f7ef;
    }

    label.option.wrong-answer {
      border-color: #dc3545;
      background-color: #fcebea;
    }

    label.option.unselected-correct-answer {
      background-color: #e9f7ef;
      border-color: #ddd;
    }

    .points-box {
      background: #b1382b;
      color: #ffffff;
      border-radius: 6px;
      padding: 4px 8px;
      font-size: 0.85em;
      display: inline-block;
      margin-top: 8px;
    }

    .points-box-wrapper {
      text-align: right;
      margin-top: 8px;
    }

    .summary-text {
      color: #b1382b;
    }

    .question-step {
      display: none;
    }

    #result {
      margin-top: 20px;
      padding: 15px;
      border-radius: 8px;
      background: #fff7e6;
      border: 1px solid #f0d9c7;
      color: #622b00;
    }
  </style>
</head>
<body>
  <div class="quiz-container">
    <h1>Feuer-Quiz</h1>
    <p>Woran kannst du dich erinnern? Versuche, alle Fragen richtig zu beantworten!</p>

    <form id="quizForm">
      <!-- Schritt 1 -->
      <div class="question-step" id="step1" style="display: block;">
        <div class="question">
          <h2>1. Was braucht man alles, um Feuer zu machen?</h2>
          <p>(Mehrere Antworten sind möglich)</p>
          <div class="options-grid">
            <label class="option">
              <input type="checkbox" name="q1" value="Feuerstein" />
              <img src="1.1 Feuerstein.jpg" alt="Feuerstein" />
              <span>Feuerstein</span>
            </label>
            <label class="option">
              <input type="checkbox" name="q1" value="Sonnenblumenkerne" />
              <img src="1.2 Sonnenblumenkerne.jpg" alt="Sonnenblumenkerne" />
              <span>Sonnenblumenkerne</span>
            </label>
            <label class="option">
              <input type="checkbox" name="q1" value="Zunder" />
              <img src="1.3 Zunder.jpg" alt="Zunder" />
              <span>Zunder</span>
            </label>
            <label class="option">
              <input type="checkbox" name="q1" value="Stück Stahl" />
              <img src="1.4 Feuerstahl.jpg" alt="Stück Stahl" />
              <span>Stück Stahl</span>
            </label>
            <label class="option">
              <input type="checkbox" name="q1" value="Distelsamen" />
              <img src="1.5 Distelsamen.jpg" alt="Distelsamen" />
              <span>Distelsamen</span>
            </label>
            <label class="option">
              <input type="checkbox" name="q1" value="Aluminium-Stab" />
              <img src="1.6 Aluminium-Stab.jpg" alt="Aluminium-Stab" />
              <span>Aluminium-Stab</span>
            </label>
            <label class="option">
              <input type="checkbox" name="q1" value="Stroh" />
              <img src="1.7 Stroh.jpg" alt="Stroh" />
              <span>Stroh</span>
            </label>
          </div>
        </div>
        <button type="button" class="btn" onclick="nextStep();">Weiter</button>
      </div>

      <!-- Schritt 2 -->
      <div class="question-step" id="step2">
        <div class="question">
          <h2>2. Was braucht ein Feuer immer unbedingt, um zu brennen?</h2>
          <div class="options-grid">
            <label class="option">
              <input type="radio" name="q2" value="Wachs" />
              <img src="2.1 Wachs.jpg" alt="Wachs" />
              <span>Wachs</span>
            </label>
            <label class="option">
              <input type="radio" name="q2" value="Wasser" />
              <img src="2.2 Wasser.jpg" alt="Wasser" />
              <span>Wasser</span>
            </label>
            <label class="option">
              <input type="radio" name="q2" value="Luft" />
              <img src="2.3 Luft.jpg" alt="Luft" />
              <span>Luft</span>
            </label>
            <label class="option">
              <input type="radio" name="q2" value="Feuerzeug" />
              <img src="2.4 Feuerzeug.jpg" alt="Feuerzeug" />
              <span>Feuerzeug</span>
            </label>
          </div>
        </div>
        <button type="button" class="btn" onclick="nextStep();">Weiter</button>
      </div>

      <!-- Schritt 3 -->
      <div class="question-step" id="step3">
        <div class="question">
          <h2>3. Was nutzt Martin, um nicht die ganze Zeit mit dem Mund zu blasen?</h2>
          <div class="options-grid">
            <label class="option">
              <input type="radio" name="q3" value="Luftpumpe" />
              <img src="3.1 Luftpumpe.jpg" alt="Luftpumpe" />
              <span>Luftpumpe</span>
            </label>
            <label class="option">
              <input type="radio" name="q3" value="Blasebalg" />
              <img src="3.2 Blasebalg.jpg" alt="Blasebalg" />
              <span>Blasebalg</span>
            </label>
            <label class="option">
              <input type="radio" name="q3" value="Hände" />
              <img src="3.3 Haende.jpg" alt="Hände" />
              <span>Hände</span>
            </label>
            <label class="option">
              <input type="radio" name="q3" value="Blasrohr" />
              <img src="3.4 Blasrohr.jpg" alt="Blasrohr" />
              <span>Blasrohr</span>
            </label>
          </div>
        </div>
        <button type="button" class="btn" onclick="submitQuiz();">Überprüfen</button>
      </div>

      <!-- Schritt 4 (Ergebnis) -->
      <div class="question-step" id="step4" style="display: none;"></div>
    </form>
  </div>

  <script>
    let currentStep = 1;

    function nextStep() {
      document.getElementById('step' + currentStep).style.display = 'none';
      currentStep++;
      const nextDiv = document.getElementById('step' + currentStep);
      nextDiv.style.display = 'block';
      nextDiv.scrollIntoView({ behavior: 'smooth' });
    }

    function submitQuiz() {
      let score = 0;
      const q1Correct = new Set(["Feuerstein","Zunder","Stück Stahl","Distelsamen","Stroh"]);
      const q1Selections = Array.from(document.querySelectorAll('input[name="q1"]:checked')).map(el => el.value);
      q1Selections.forEach(val => score += q1Correct.has(val) ? 2 : -1);

      const q2Correct = "Luft";
      const q2Sel = document.querySelector('input[name="q2"]:checked');
      if (q2Sel && q2Sel.value === q2Correct) score += 10;

      const q3Correct = "Blasebalg";
      const q3Sel = document.querySelector('input[name="q3"]:checked');
      if (q3Sel && q3Sel.value === q3Correct) score += 10;

      // Negative Punkte verhindern
      if (score < 0) score = 0;

      const maxScore = 30;
      let feedbackSummary = score === maxScore ? 'Super! Du hast alles richtig gemacht!'
        : score >= 22 ? 'Sehr gut! Nur noch ein kleiner Schritt bis zur vollen Punktzahl.'
        : score >= 12 ? 'Gut gemacht! Schau dir die Fragen noch einmal an und versuche es erneut.'
        : 'Du hast noch etwas Übung nötig – probiere es später noch einmal!';

      const q1Images = {
        'Feuerstein': '1.1 Feuerstein.jpg',
        'Sonnenblumenkerne': '1.2 Sonnenblumenkerne.jpg',
        'Zunder': '1.3 Zunder.jpg',
        'Stück Stahl': '1.4 Feuerstahl.jpg',
        'Distelsamen': '1.5 Distelsamen.jpg',
        'Aluminium-Stab': '1.6 Aluminium-Stab.jpg',
        'Stroh': '1.7 Stroh.jpg'
      };
      const q2Images = {
        'Wachs': '2.1 Wachs.jpg',
        'Wasser': '2.2 Wasser.jpg',
        'Luft': '2.3 Luft.jpg',
        'Feuerzeug': '2.4 Feuerzeug.jpg'
      };
      const q3Images = {
        'Luftpumpe': '3.1 Luftpumpe.jpg',
        'Blasebalg': '3.2 Blasebalg.jpg',
        'Hände': '3.3 Haende.jpg',
        'Blasrohr': '3.4 Blasrohr.jpg'
      };

      function buildResultSection(title, options, type, correctSet, selectedList, pointsEarned, pointsMax, imgMap) {
        let section = `<div class="question"><h3>${title}</h3><div class="options-grid">`;
        options.forEach(opt => {
          const selected = selectedList.includes(opt);
          const isCorrect = correctSet.has(opt);
          let extraClass = selected && isCorrect ? 'correct-answer' :
                           selected && !isCorrect ? 'wrong-answer' :
                           !selected && isCorrect ? 'unselected-correct-answer' : '';
          section += `<label class="option ${extraClass}">`;
          section += `<input type="${type}" disabled ${selected ? 'checked' : ''} />`;
          section += `<img src="${imgMap[opt]}" alt="${opt}" />`;
          section += `<span>${opt}</span>`;
          section += `</label>`;
        });
        section += `</div><div class="points-box-wrapper"><span class="points-box">${pointsEarned}/${pointsMax}</span></div></div>`;
        return section;
      }

      // Punkte pro Frage
      let q1Points = q1Selections.reduce((p, v) => p + (q1Correct.has(v) ? 2 : -1), 0);
      if (q1Points < 0) q1Points = 0;
      let q2Points = (q2Sel && q2Sel.value === q2Correct) ? 10 : 0;
      let q3Points = (q3Sel && q3Sel.value === q3Correct) ? 10 : 0;

      const q1ResultSection = buildResultSection(
        'Frage 1: Was braucht man alles, um Feuer zu machen?',
        Object.keys(q1Images), 'checkbox',
        q1Correct, q1Selections,
        q1Points, 10, q1Images
      );

      const q2ResultSection = buildResultSection(
        'Frage 2: Was braucht ein Feuer immer unbedingt, um zu brennen?',
        Object.keys(q2Images), 'radio',
        new Set([q2Correct]), q2Sel ? [q2Sel.value] : [],
        q2Points, 10, q2Images
      );

      const q3ResultSection = buildResultSection(
        'Frage 3: Was nutzt Martin, um nicht die ganze Zeit mit dem Mund zu blasen?',
        Object.keys(q3Images), 'radio',
        new Set([q3Correct]), q3Sel ? [q3Sel.value] : [],
        q3Points, 10, q3Images
      );

      const step4Div = document.getElementById('step4');
      step4Div.classList.add('result-step');
      step4Div.innerHTML = `
        <div class="question">
          <h2>Ergebnis</h2>
          <p class="summary-text">Du hast <strong>${score} von ${maxScore}</strong> Punkten erreicht.</p>
          <p>${feedbackSummary}</p>
        </div>
        ${q1ResultSection}
        ${q2ResultSection}
        ${q3ResultSection}
      `;
      document.getElementById('step3').style.display = 'none';
      step4Div.style.display = 'block';
      step4Div.scrollIntoView({ behavior: 'smooth' });
    }
  </script>
</body>
</html>
